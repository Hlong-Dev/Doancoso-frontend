<!-- /*
* Template Name: Blogy
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="favicon.png">

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap5" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600;700&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="~/fonts/icomoon/style.css">
    <link rel="stylesheet" href="~/fonts/flaticon/font/flaticon.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="~/css/tiny-slider.css">
    <link rel="stylesheet" href="~/css/aos.css">
    <link rel="stylesheet" href="~/css/glightbox.min.css">
    <link rel="stylesheet" href="~/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="~/js/notifications.js"></script>
    <link rel="stylesheet" href="css/flatpickr.min.css">
    <link rel="icon" type="image/png" href="~/images/screenshot 2024-05-07 102320.png">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <title>Blogy - Mạng Xã Hội Chia sẻ Quan Điểm - Kiến Thức Hàng Đầu Việt Nam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .icons {
            display: flex;
            align-items: center;
        }

            .icons a {
                margin: 0 10px;
                text-decoration: none;
                color: white;
            }

                .icons a i {
                    font-size: 20px;
                }


        .write-button{
            padding: 10px 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
            text-decoration: none;
            color: #000;
            margin-left: 10px;
        }

        .write-button {
            background-color: #f9f9f9;
        }
    </style>
    <style>
        .site-menu a {
            margin-right: 16px; /* Add space between menu items */
            text-decoration: none;
            color: white; /* Change color to white */
        }

        ul.js-clone-nav.d-none.d-lg-inline-block.text-start.site-menu.mx-auto {
            margin-top: 21px;
        }
        .c {
            width: 53px;
        }

        #notifications {
            margin-top: 20px;
        }

        .notification {
            display: flex;
            align-items: center;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

            .notification:hover {
                background-color: #e9e9e9;
            }

            .notification img {
                border-radius: 50%;
                margin-right: 10px;
            }

        .notification-text {
            flex-grow: 1;
        }

        #notification-popup-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            z-index: 1000;
        }

        .notification-popup {
            border: 1px solid #ddd;
            background-color: #0C2F40;
            color: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

            .notification-popup:hover {
                opacity: 0.9;
            }
    </style>
    <style>
        /* a:not([href]):not([class]), a:not([href]):not([class]):hover {
                            color: black;
                            text-decoration: none;
                        } */
        .site-nav .site-navigation .site-menu .has-children:hover .dropdown {
            visibility: visible;
            opacity: 1;
            top: 100%;
            left: 0;
        }

        /* Thêm hiệu ứng hover cho các mục trong dropdown menu */
        .site-nav .site-navigation .site-menu .has-children .dropdown a:hover {
            background-color: #214252;
            color: white !important; /* Thêm thuộc tính để đổi màu chữ thành trắng */
        }

        /* Định nghĩa cơ bản cho dropdown menu */
        .site-nav .site-navigation .site-menu .has-children .dropdown {
            visibility: hidden;
            opacity: 0;
            top: 100%;
            left: 0; /* Đảm bảo dropdown xuất hiện ngay bên trái của mục cha */
            z-index: 999;
            position: absolute;
            text-align: left;
            -webkit-box-shadow: 0 2px 10px -2px rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 10px -2px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
            margin-top: 20px;
            margin-left: 0; /* Đảm bảo không có khoảng cách bên trái */
            background: #fff;
            -webkit-transition: 0.2s 0s;
            -o-transition: 0.2s 0s;
            transition: 0.2s 0s;
            border-radius: 7px;
        }

        /* Đảm bảo dropdown hiển thị khi hover vào mục cha */
        .site-nav .site-navigation .site-menu .has-children:hover .dropdown {
            visibility: visible;
            opacity: 1;
            top: 100%;
            left: 0;
        }

        img.autocomplete-image {
            width: 35px;
            height: 35px;
        }

        .ui-autocomplete {
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
            overflow-x: hidden;
        }

    /*     .ui-menu-item {
            padding: 8px;
        }

        .col-6 {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 auto;
            flex: 0 0 auto;
            width: 51%;
        }

        .col-3 {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 auto;
            flex: 0 0 auto;
            width: 25%;
        }

        .text-end {
            text-align: left !important;
            width: 121px;
        }

        .col-2 {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 auto;
            flex: 0 0 auto;
            width: 15.66667%;
        }

        .search-form .form-control {
            height: 40px;
            background-color: #fff;
            margin-bottom: 0;
            border-color: rgba(255, 255, 255, 0.2) !important;
            padding-left: 30px;
            color: #fff;
            width: 130px;
        } */
        .search-form .form-control {
          
            background-color: #fff;
            margin-bottom: 0;
            border-color: rgba(255, 255, 255, 0.2) !important;
            padding-left: 30px;
            color: #fff;
            
        }

        .col-6 {
            -webkit-box-flex: 0;
            -ms-flex: 0 0 auto;
            flex: 0 0 auto;
            width: 54%;
        }

        img.cc {
            width: 40px !important;
            height: 40px !important;
        }
    </style>
</head>
<body>

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close">
                <span class="icofont-close js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>

    </div>

    <nav class="site-nav">
        <div class="container">
            <div class="menu-bg-wrap">
                <div class="site-navigation">
                    <div class="row g-0 align-items-center">
                        <div class="col-1">
                            <a href="http://localhost:5236/" class="logo m-0 float-start">Blogy<span class="text-primary">.</span></a>
                        </div>
                        <div class="col-5">
                            <div class="icons">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-youtube"></i></a>
                                <a href="#"><i class="fab fa-spotify"></i></a>
                             
                            </div>
                        </div>
                    
                        <div class="col-3 text-end">
                            <a href="#" class="burger ms-auto float-end site-menu-toggle js-menu-toggle d-inline-block d-lg-none light">
                                <span></span>
                            </a>
                            <form id="search-form" class="search-form d-none d-lg-inline-block">
                                <input type="text" id="search-input" class="form-control" placeholder="Tìm kiếm blog...">
                                <span class="bi-search"></span>
                            </form>
                            <div id="autocomplete-results"></div>
                        </div>
                        <div class="col-1">
                            <a href="http://localhost:5236/Home/Create" class="write-button">
                                <i class="fas fa-feather-alt"></i> Viết bài
                            </a>
                        </div>
                        <div class="c">
                            <a href="http://localhost:5236/account/chat" class="write-button">
                                <i class="fas fa-comments"></i>
                            </a>
                        </div>
                        <div class="c">
                            <partial name="_notipartial" />
                        </div>
                        <div class="col-1 d-none d-lg-block">
                            <partial name="_LoginPartial" />
                        </div>
                    </div>
                </div>
                <div class="site-navigation">
                    <ul class="js-clone-nav d-none d-lg-inline-block text-start site-menu mx-auto">
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">QUAN ĐIỂM - TRANH LUẬN</a></li>
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">KHOA HỌC CÔNG NGHỆ</a></li>
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">TÀI CHÍNH</a></li>
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">NẤU ĂN - ẨM THỰC</a></li>
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">NHIẾP ẢNH</a></li>
                        <li><a asp-area="" asp-controller="Home" asp-action="Quandiem">THINKING OUT LOUD</a></li>
                        <li class="has-children active">
                            <a href="financing.html">TÙY CHỌN KHÁC</a>
                            <ul class="dropdown">
                                <li>   <a asp-area="" asp-controller="Home" asp-action="Blog">Bài Viết Mới</a></li>
                                <li>   <a asp-area="" asp-controller="Account" asp-action="bio">Bài Viết Của Tôi</a></li>
                                <li><a asp-area="" asp-controller="Home" asp-action="Create">Viết Bài</a></li>
                                <li class="has-children">
                                    <a href="#">Trang Cá Nhân</a>
                                    <ul class="dropdown">
                                        <li><a href="#">Danh Sách Theo Dõi</a></li>
                                        <li><a href="#">Liên Hệ</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                      
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Start retroy layout blog posts -->
    @RenderBody()





    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/tiny-slider.js"></script>

    <script src="~/js/flatpickr.min.js"></script>


    <script src="~/js/aos.js"></script>
    <script src="~/js/glightbox.min.js"></script>
    <script src="~/js/navbar.js"></script>
    <script src="~/js/counter.js"></script>
    <script src="~/js/custom.js"></script>

    <script>
        $('#search-form').submit(function (e) {
            e.preventDefault();
            var searchTerm = $('#search-input').val().toLowerCase();
            window.location.href = `http://localhost:5236/Home/Blog?search=${encodeURIComponent(searchTerm)}`;
        });

    </script>
    <script>
        $(document).ready(function () {
            // Fetch all blog posts and store in a variable
            var allProductsOriginal = []; // Array to store all blog posts

            // Function to fetch all blog posts
            function fetchBlogPosts() {
                $.ajax({
                    url: 'http://localhost:5233/api/Products',
                    method: 'GET',
                    success: function (data) {
                        allProductsOriginal = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    },
                    error: function (xhr, status, error) {
                        console.error('Error fetching blog posts:', error);
                    }
                });
            }

            // Call fetchBlogPosts on page load
            fetchBlogPosts();

            // Initialize autocomplete
            $('#search-input').autocomplete({
                source: function (request, response) {
                    var searchTerm = request.term.toLowerCase();
                    var filteredPosts = allProductsOriginal.filter(function (product) {
                        var title = product.title.toLowerCase();
                        var description = product.description.toLowerCase();
                        var content = product.content.toLowerCase();
                        return title.includes(searchTerm) || description.includes(searchTerm) || content.includes(searchTerm);
                    });
                    response(filteredPosts.slice(0, 10)); // Limit to 10 suggestions
                },
                select: function (event, ui) {
                    // Redirect to the selected blog post's page
                    window.location.href = '/Home/single?slug=' + ui.item.slug;
                },
                focus: function (event, ui) {
                    $('#search-input').val(ui.item.title);
                    return false;
                },
                minLength: 2
            }).autocomplete('instance')._renderItem = function (ul, item) {
                var listItem = $('<li>');
                var blogLink = $('<a>').attr('href', '/Home/single?slug=' + item.slug);
                var blogImage = $('<img>').attr('src', item.imageUrl).attr('alt', item.title).addClass('autocomplete-image');
                var blogTitle = $('<span>').text(item.title);

                blogLink.append(blogImage, blogTitle);
                listItem.append(blogLink).appendTo(ul);

                return listItem;
            };

        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</body>
</html>
